<div class="bookTab">
    <div class="bookWrapper">
        <% for (book of books) { %>
            <div class="book <%= book.selected != null? 'selected':'' %>">
                <img class="cover" src="<%= './assets/img/bookcover/' + book.book_cover%>">
                
                <div class="bookInfo">
                    <p class="title"><%= book.name %></p>
                    <p class="author"><%= book.author %></p>

                    <div class="starWrapper">
                        <% for (let i = 0; i < book.stars; i++) { %>
                            <img src="./assets/img/starSelected.png">
                        <% } %>

                        <% for (let i = book.stars + 1; i < 6; i++) { %>
                            <img src="./assets/img/starUnselected.png">
                        <% } %> 
                    </div>

                    <p class="lines"><%= book.numberOfLines %> sentences</p>

                    <div class="buttonPieWrapper">
                        
                        <% if (book.progress === undefined) { %>
                            <!-- not logged in part -->
                            <button class="button one" onclick="selectBookTextNotLoggedIn(<%= book.book_id %>, 'book')">Select</button>
                        <% } else { %>
                            <!-- if logged in -->
                            
                            <% if (book.progress !== null) { %> 
                                <% if (book.selected !== null) { %> 
                                    <button class="button one">Settings</button>
                                <% } else { %>
                                    <% if (book.progress !== undefined) { %>
                                        
                                        <button class="button one" onclick="selectBook(<%= book.book_id %>)">Select</button>
                                    <% } else { %>
                                        
                                        
                                    <% } %>
                                <% } %>

                                
                                <% if (book.progress !== undefined) { %>
                                    <div class="piebackground" style="--p:100"> <%= Math.round(book.progress * 10) / 10 %> %</div>

                                    <div class="pie" style="--p:<%= Math.round(book.progress * 10) / 10 %>"> </div>
                                <% } %>

                                
        
                            <% } else { %>
                                <button class="button one" onclick="selectBook(<%= book.book_id %>)">Start</button>
                            <% } %>
                        <% } %>
                    </div>
                    
                </div>
                
            </div>
            
        <% } %>

        <div class="emptyBook"></div>
        <div class="emptyBook"></div>
    </div>
    
</div>

